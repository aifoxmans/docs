{"openapi":"3.0.1","info":{"title":"支付Api接口文档","contact":{"name":"epay123"},"license":{"name":"Apache 2.0","url":"https://docs.epay123.net"},"version":"1.0.1"},"servers":[{"url":"http://localhost:9216","description":"Generated server url"}],"paths":{"/api/pay/unifiedOrder":{"post":{"tags":["支付订单接口"],"summary":"统一下单","description":"商户业务系统通过统一下单接口发起支付收款订单，支付网关会根据商户配置的支付通道路由支付通道完成支付下单。支付网关根据不同的支付方式返回对应的支付参数，业务系统使用支付参数发起收款。","operationId":"unifiedOrder","requestBody":{"description":"统一下单请求参数","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnifiedOrderRQ"}}},"required":true},"responses":{"200":{"description":"成功返回结果","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResUnifiedOrderRS"}}}}}}},"/api/pay/query":{"post":{"tags":["支付订单接口"],"summary":"查询订单","description":"商户通过该接口查询订单，支付网关会返回订单最新的数据。","operationId":"queryOrder","requestBody":{"description":"查询订单请求参数","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryPayOrderRQ"}}},"required":true},"responses":{"200":{"description":"成功返回结果","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResQueryPayOrderRS"}}}}}}},"/api/pay/close":{"post":{"tags":["支付订单接口"],"summary":"关闭订单","description":"商户通过该接口关闭订单，支付网关会对订单完成关闭处理。多数情况下可不处理,自行随到期时间关闭。","operationId":"closeOrder","requestBody":{"description":"关闭订单请求参数","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClosePayOrderRQ"}}},"required":true},"responses":{"200":{"description":"成功返回结果","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResClosePayOrderRS"}}}}}}},"/api/channelbiz/cbcoinpay/settleRequest":{"post":{"tags":["钱包结算接口"],"summary":"结算发起","description":"商户通过此接口发起结算请求，将可用余额结算至已申报的地址。","operationId":"settleRequest","requestBody":{"description":"结算发起请求参数","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplyCoinSettleRQ"}}},"required":true},"responses":{"200":{"description":"成功返回结果","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResApplyCoinSettleRS"}}}}}}},"/api/channelbiz/cbcoinpay/settleRequestGet":{"post":{"tags":["钱包结算接口"],"summary":"结算记录查询","description":"查询结算订单的处理状态和详细信息。","operationId":"settleRequestGet","requestBody":{"description":"结算记录查询请求参数","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetApplyCoinSettleRQ"}}},"required":true},"responses":{"200":{"description":"成功返回结果","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResGetApplyCoinSettleRS"}}}}}}},"/api/channelbiz/cbcoinpay/settleAddressList":{"post":{"tags":["钱包结算接口"],"summary":"结算加密货币地址列表","description":"商户向平台申报用于接收结算款项的加密货币地址。","operationId":"settleAddressList","requestBody":{"description":"结算加密货币地址列表请求参数","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListCoinSettleAddrRQ"}}},"required":true},"responses":{"200":{"description":"成功返回结果","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResListCoinSettleAddrRS"}}}}}}},"/api/channelbiz/cbcoinpay/settleAddressApply":{"post":{"tags":["钱包结算接口"],"summary":"结算加密货币地址申报","description":"商户向平台申报用于接收结算款项的加密货币地址。申报后需要平台审核。","operationId":"settleAddressApply","requestBody":{"description":"结算加密货币地址申报请求参数","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplyCoinSettleAddrRQ"}}},"required":true},"responses":{"200":{"description":"成功返回结果","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResApplyCoinSettleAddrRS"}}}}}}}},"components":{"schemas":{"UnifiedOrderRQ":{"required":["amount","appId","body","currency","mchNo","mchOrderNo","reqTime","sign","signType","subject","version","wayCode"],"type":"object","properties":{"version":{"type":"string","description":"版本号","example":"1.0.1"},"signType":{"type":"string","description":"签名类型，目前只支持MD5方式","example":"MD5"},"sign":{"type":"string","description":"签名值，详见签名算法","example":"xxxxxx"},"reqTime":{"type":"string","description":"时间戳,13位时间戳","example":"1622016572190"},"mchNo":{"type":"string","description":"商户号","example":"M1234567890"},"appId":{"type":"string","description":"商户应用ID","example":"88808634c46ff1a7807888888"},"mchOrderNo":{"type":"string","description":"商户订单号","example":"mho1624005107281"},"wayCode":{"type":"string","description":"支付方式  如： QR_CASHIER、CB_COIN_ADDR等","example":"QR_CASHIER"},"amount":{"minimum":1,"type":"integer","description":"支付金额， 单位：分","format":"int64","example":100},"currency":{"type":"string","description":"货币代码","example":"USD"},"clientIp":{"type":"string","description":"客户端IP地址","example":"192.166.1.132"},"subject":{"type":"string","description":"商品标题","example":"商品标题"},"body":{"type":"string","description":"商品描述信息","example":"商品描述"},"notifyUrl":{"type":"string","description":"异步通知地址","example":"https://xxx/notify"},"returnUrl":{"type":"string","description":"跳转通知地址","example":"https://xxx/returnUrl"},"expiredTime":{"type":"integer","description":"订单失效时间, 单位：秒","format":"int32","example":3600},"channelExtra":{"type":"string","description":"特定渠道发起额外参数","example":"{\"authCode\":\"280812820366966512\"}"},"extParam":{"type":"string","description":"商户扩展参数","example":"{}"},"divisionMode":{"type":"integer","description":"分账模式： 0-该笔订单不允许分账, 1-支付成功按配置自动完成分账, 2-商户手动分账(解冻商户金额)","format":"int32","example":1},"channelUserId":{"type":"string"}}},"ApiResUnifiedOrderRS":{"type":"object","properties":{"code":{"title":"code","type":"integer","description":"业务响应码","format":"int32","example":200},"msg":{"title":"msg","type":"string","description":"业务响应信息","example":"成功"},"data":{"$ref":"#/components/schemas/UnifiedOrderRS"},"sign":{"title":"sign","type":"string","description":"签名值"}}},"UnifiedOrderRS":{"title":"data","required":["mchOrderNo","orderState","payDataType","payOrderId"],"type":"object","properties":{"payOrderId":{"type":"string","description":"支付订单号","example":"P202106181642329900002"},"mchOrderNo":{"type":"string","description":"商户订单号","example":"mho1624005752661"},"orderState":{"type":"integer","description":"支付订单状态 0-订单生成 1-支付中 2-支付成功 3-支付失败 4-已撤销 5-已退款 6-订单关闭","format":"int32","example":3},"payDataType":{"type":"string","description":"支付参数类型 payUrl-跳转链接的方式 codeUrl-二维码地址 codeImgUrl-二维码图片地址 none-空支付参数"},"payData":{"type":"string","description":"支付参数"},"errCode":{"type":"string","description":"渠道返回错误代码","example":"ACQ.PAYMENT_AUTH_CODE_INVALID"},"errMsg":{"type":"string","description":"渠道返回错误信息","example":"Business Failed"}},"description":"数据对象"},"QueryPayOrderRQ":{"required":["appId","mchNo","mchOrderNo","payOrderId","reqTime","sign","signType","version"],"type":"object","properties":{"version":{"type":"string","description":"版本号","example":"1.0.1"},"signType":{"type":"string","description":"签名类型，目前只支持MD5方式","example":"MD5"},"sign":{"type":"string","description":"签名值，详见签名算法","example":"xxxxxx"},"reqTime":{"type":"string","description":"时间戳,13位时间戳","example":"1622016572190"},"mchNo":{"type":"string","description":"商户号","example":"M1234567890"},"appId":{"type":"string","description":"商户应用ID","example":"88808634c46ff1a7807888888"},"mchOrderNo":{"type":"string","description":"商户订单号","example":"20160427210604000490"},"payOrderId":{"type":"string","description":"支付系统订单号, 支付中心生成的订单号，与mchOrderNo二者传一即可","example":"P202106181104177050002"}}},"ApiResQueryPayOrderRS":{"type":"object","properties":{"code":{"title":"code","type":"integer","description":"业务响应码","format":"int32","example":200},"msg":{"title":"msg","type":"string","description":"业务响应信息","example":"成功"},"data":{"$ref":"#/components/schemas/QueryPayOrderRS"},"sign":{"title":"sign","type":"string","description":"签名值"}}},"CoinOrderTransaction":{"type":"object","properties":{"txId":{"type":"string","description":"支付交易流水号","example":"1975dc00-006c-4090-838e-2aa135cbcac0"},"payOrderId":{"type":"string","description":"支付订单号","example":"P1234567890"},"txHash":{"type":"string","description":"交易HASH"},"amount":{"type":"number","description":"支付金额,含小数点","example":1000.25},"tokenId":{"type":"string","description":"币种ID","example":"TRON_USDT"},"fromAddress":{"type":"string","description":"来源地址","example":"TX1234567890"},"toAddress":{"type":"string","description":"目标地址","example":"TD1234567890"},"status":{"type":"string","description":"交易状态: Submitted, PendingScreening, PendingAuthorization, PendingSignature, Broadcasting, Confirming, Completed, Failed, Rejected, Pending","example":"Confirming"},"createdAt":{"type":"string","description":"创建时间","format":"date-time"},"updatedAt":{"type":"string","description":"更新时间","format":"date-time"}},"description":"订单交易流水"},"QueryPayOrderRS":{"title":"data","required":["amount","appId","body","createdAt","currency","ifCode","mchNo","mchOrderNo","payOrderId","state","subject","wayCode"],"type":"object","properties":{"payOrderId":{"type":"string","description":"支付订单号","example":"P202106181104177050002"},"mchNo":{"type":"string","description":"商户号","example":"M1623984572"},"appId":{"type":"string","description":"商户应用ID","example":"60cc09bce4b0f1c0b83761c9"},"mchOrderNo":{"type":"string","description":"返回商户传入的订单号","example":"mho1623985457320"},"ifCode":{"type":"string","description":"支付接口代码","example":"cbcoinpay"},"wayCode":{"type":"string","description":"支付方式代码","example":"CB_COIN_ADDR"},"amount":{"type":"integer","description":"支付金额,单位分","format":"int64","example":2058},"currency":{"type":"string","description":"三位货币代码,美元:USD","example":"USD"},"state":{"type":"integer","description":"支付状态: 0-订单生成, 1-支付中, 2-支付成功, 3-支付失败, 4-已撤销, 5-已退款, 6-订单关闭","format":"int32","example":2},"clientIp":{"type":"string","description":"客户端IP","example":"192.166.1.132"},"subject":{"type":"string","description":"商品标题","example":"商品标题"},"body":{"type":"string","description":"商品描述信息","example":"商品描述"},"channelOrderNo":{"type":"string","description":"渠道订单号","example":"2021061822001423031419593035"},"errCode":{"type":"string","description":"渠道支付错误码"},"errMsg":{"type":"string","description":"渠道支付错误描述"},"extParam":{"type":"string","description":"商户扩展参数","example":"{}"},"successTime":{"type":"integer","description":"订单支付成功时间,13位时间戳","format":"int64","example":1623985459000},"createdAt":{"type":"integer","description":"创建时间,13位时间戳","format":"int64","example":1623985457705},"orderTransactionList":{"type":"array","description":"订单交易流水","items":{"$ref":"#/components/schemas/CoinOrderTransaction"}}},"description":"数据对象"},"ClosePayOrderRQ":{"required":["appId","mchNo","mchOrderNo","payOrderId","reqTime","sign","signType","version"],"type":"object","properties":{"version":{"type":"string","description":"版本号","example":"1.0.1"},"signType":{"type":"string","description":"签名类型，目前只支持MD5方式","example":"MD5"},"sign":{"type":"string","description":"签名值，详见签名算法","example":"xxxxxx"},"reqTime":{"type":"string","description":"时间戳,13位时间戳","example":"1622016572190"},"mchNo":{"type":"string","description":"商户号","example":"M1234567890"},"appId":{"type":"string","description":"商户应用ID","example":"88808634c46ff1a7807888888"},"mchOrderNo":{"type":"string","description":"商户订单号","example":"20160427210604000490"},"payOrderId":{"type":"string","description":"支付中心生成的订单号，与mchOrderNo二者传一即可","example":"P202106181104177050002"}}},"ApiResClosePayOrderRS":{"type":"object","properties":{"code":{"title":"code","type":"integer","description":"业务响应码","format":"int32","example":200},"msg":{"title":"msg","type":"string","description":"业务响应信息","example":"成功"},"data":{"$ref":"#/components/schemas/ClosePayOrderRS"},"sign":{"title":"sign","type":"string","description":"签名值"}}},"ClosePayOrderRS":{"title":"data","type":"object","description":"数据对象"},"ApplyCoinSettleRQ":{"required":["amount","appId","currency","mchNo","payoutChannel","reqTime","requestId","sign","signType","tokenId","version"],"type":"object","properties":{"version":{"type":"string","description":"版本号","example":"1.0.1"},"signType":{"type":"string","description":"签名类型，目前只支持MD5方式","example":"MD5"},"sign":{"type":"string","description":"签名值，详见签名算法","example":"xxxxxx"},"reqTime":{"type":"string","description":"时间戳,13位时间戳","example":"1622016572190"},"mchNo":{"type":"string","description":"商户号","example":"M1234567890"},"appId":{"type":"string","description":"商户应用ID","example":"88808634c46ff1a7807888888"},"requestId":{"type":"string","description":"请求ID","example":"BIZ1234567890"},"notifyUrl":{"type":"string","description":"回调地址","example":"https://xxx/notify"},"amount":{"type":"integer","description":"加密货币/法币金额,单位分","format":"int64","example":1000},"tokenId":{"type":"string","description":"结算币种ID","example":"TRON_USDT"},"payoutChannel":{"type":"string","description":"结算提现方式：加密提币Crypto/法币出金OffRamp，API方式暂且仅支持Crypto","example":"Crypto"},"addrServerRequestId":{"type":"string","description":"加密货币申请ID, Crypto结算方式时与address必传其一","example":"ADDR1234567890"},"address":{"type":"string","description":"提币地址, Crypto结算方式时与addrServerRequestId必传其一","example":"TX1234567890"},"bankServerRequestId":{"type":"string","description":"法币银行申请ID, OffRamp结算方式时bankServerRequestId与bankName+bankAccount必传其一","example":"BANK1234567890"},"bankName":{"type":"string","description":"法币银行, OffRamp结算方式时bankServerRequestId与bankName+bankAccount必传其一","example":"Bank Of US"},"bankAccount":{"type":"string","description":"法币银行账号, OffRamp结算方式时bankServerRequestId与bankName+bankAccount必传其一","example":"1234567890"},"currency":{"type":"string","description":"法币,目前仅支持USD","example":"USD"}}},"ApiResApplyCoinSettleRS":{"type":"object","properties":{"code":{"title":"code","type":"integer","description":"业务响应码","format":"int32","example":200},"msg":{"title":"msg","type":"string","description":"业务响应信息","example":"成功"},"data":{"$ref":"#/components/schemas/ApplyCoinSettleRS"},"sign":{"title":"sign","type":"string","description":"签名值"}}},"ApplyCoinSettleRS":{"title":"data","required":["serverRequestId","status"],"type":"object","properties":{"serverRequestId":{"type":"string","description":"平台申请ID","example":"1234567890"},"status":{"type":"integer","description":"状态: 0-处理中, 1-正常, 2-失败","format":"int32","example":0}},"description":"数据对象"},"GetApplyCoinSettleRQ":{"required":["appId","mchNo","reqTime","requestId","sign","signType","version"],"type":"object","properties":{"version":{"type":"string","description":"版本号","example":"1.0.1"},"signType":{"type":"string","description":"签名类型，目前只支持MD5方式","example":"MD5"},"sign":{"type":"string","description":"签名值，详见签名算法","example":"xxxxxx"},"reqTime":{"type":"string","description":"时间戳,13位时间戳","example":"1622016572190"},"mchNo":{"type":"string","description":"商户号","example":"M1234567890"},"appId":{"type":"string","description":"商户应用ID","example":"88808634c46ff1a7807888888"},"requestId":{"type":"string","description":"请求ID","example":"BIZ1234567890"}}},"ApiResGetApplyCoinSettleRS":{"type":"object","properties":{"code":{"title":"code","type":"integer","description":"业务响应码","format":"int32","example":200},"msg":{"title":"msg","type":"string","description":"业务响应信息","example":"成功"},"data":{"$ref":"#/components/schemas/GetApplyCoinSettleRS"},"sign":{"title":"sign","type":"string","description":"签名值"}}},"GetApplyCoinSettleRS":{"title":"data","required":["amount","currency","requestId","serverRequestId","status","tokenId"],"type":"object","properties":{"serverRequestId":{"type":"string","description":"平台申请ID","example":"1234567890"},"requestId":{"type":"string","description":"请求ID","example":"BIZ1234567890"},"tokenId":{"type":"string","description":"币种ID","example":"TRON_USDT"},"currency":{"type":"string","description":"法币","example":"USD"},"amount":{"type":"integer","description":"法币金额","format":"int64","example":1000},"address":{"type":"string","description":"提币地址","example":"TX1234567890"},"notifyUrl":{"type":"string","description":"回调地址","example":"https://xxx/notify"},"status":{"type":"integer","description":"状态: 0-处理中, 1-正常, 2-失败","format":"int32","example":0}},"description":"数据对象"},"ListCoinSettleAddrRQ":{"required":["appId","mchNo","reqTime","sign","signType","version"],"type":"object","properties":{"version":{"type":"string","description":"版本号","example":"1.0.1"},"signType":{"type":"string","description":"签名类型，目前只支持MD5方式","example":"MD5"},"sign":{"type":"string","description":"签名值，详见签名算法","example":"xxxxxx"},"reqTime":{"type":"string","description":"时间戳,13位时间戳","example":"1622016572190"},"mchNo":{"type":"string","description":"商户号","example":"M1234567890"},"appId":{"type":"string","description":"商户应用ID","example":"88808634c46ff1a7807888888"},"pageNumber":{"type":"integer","description":"支持分页: 默认1开始","format":"int32","example":1},"pageSize":{"type":"integer","description":"支持分页: 默认20页","format":"int32","example":20},"requestId":{"type":"string","description":"请求ID","example":"12345678909"},"tokenId":{"type":"string","description":"结算币种的唯一标识","example":"TRON_USDT"},"address":{"type":"string","description":"提币地址","example":"TX123456789021345678"},"remark":{"type":"string","description":"备注","example":"remark"}}},"ApiResListCoinSettleAddrRS":{"type":"object","properties":{"code":{"title":"code","type":"integer","description":"业务响应码","format":"int32","example":200},"msg":{"title":"msg","type":"string","description":"业务响应信息","example":"成功"},"data":{"$ref":"#/components/schemas/ListCoinSettleAddrRS"},"sign":{"title":"sign","type":"string","description":"签名值"}}},"CoinSettleAddr":{"type":"object","properties":{"serverRequestId":{"type":"string","description":"结算地址申请ID","example":"1234567890"},"requestId":{"type":"string","description":"业务系统结算地址申请ID","example":"BIZ1234567890"},"mchNo":{"type":"string","description":"商户号","example":"M1234567890"},"isvNo":{"type":"string","description":"服务商号"},"appId":{"type":"string","description":"应用号","example":"1234567890"},"ifCode":{"type":"string","description":"支付接口代码","example":"cbcoinpay"},"createdWay":{"type":"string","description":"创建方式: WEB,API","example":"API"},"tokenId":{"type":"string","description":"币种ID","example":"TRON_USDT"},"address":{"type":"string","description":"提币地址","example":"TX1234567890"},"channelAddrId":{"type":"string","description":"渠道提币地址ID","example":"1234567890"},"remark":{"type":"string","description":"备注","example":"TRON Address"},"status":{"type":"integer","description":"状态: 0-审核中, 1-正常, 2-异常, 3-停用","format":"int32","example":1},"errMsg":{"type":"string","description":"错误描述","example":"Expired"},"createdAt":{"type":"string","description":"创建时间","format":"date-time"},"updatedAt":{"type":"string","description":"更新时间","format":"date-time"}},"description":"提币地址"},"ListCoinSettleAddrRS":{"title":"data","required":["addrList","addrTotal"],"type":"object","properties":{"addrList":{"type":"array","description":"返回地址列表","items":{"$ref":"#/components/schemas/CoinSettleAddr"}},"addrTotal":{"type":"integer","description":"返回地址总数","format":"int64","example":20}},"description":"数据对象"},"ApplyCoinSettleAddrRQ":{"required":["address","appId","mchNo","remark","reqTime","requestId","sign","signType","tokenId","version"],"type":"object","properties":{"version":{"type":"string","description":"版本号","example":"1.0.1"},"signType":{"type":"string","description":"签名类型，目前只支持MD5方式","example":"MD5"},"sign":{"type":"string","description":"签名值，详见签名算法","example":"xxxxxx"},"reqTime":{"type":"string","description":"时间戳,13位时间戳","example":"1622016572190"},"mchNo":{"type":"string","description":"商户号","example":"M1234567890"},"appId":{"type":"string","description":"商户应用ID","example":"88808634c46ff1a7807888888"},"requestId":{"type":"string","description":"请求ID","example":"12345678909"},"tokenId":{"type":"string","description":"结算币种的唯一标识","example":"TRON_USDT"},"address":{"type":"string","description":"提币地址","example":"TX123456789021345678"},"remark":{"type":"string","description":"备注","example":"remark"}}},"ApiResApplyCoinSettleAddrRS":{"type":"object","properties":{"code":{"title":"code","type":"integer","description":"业务响应码","format":"int32","example":200},"msg":{"title":"msg","type":"string","description":"业务响应信息","example":"成功"},"data":{"$ref":"#/components/schemas/ApplyCoinSettleAddrRS"},"sign":{"title":"sign","type":"string","description":"签名值"}}},"ApplyCoinSettleAddrRS":{"title":"data","required":["serverRequestId","status"],"type":"object","properties":{"serverRequestId":{"type":"string","description":"平台申请ID","example":"1234567890"},"status":{"type":"integer","description":"状态: 0-处理中, 1-正常, 2-失败","format":"int32","example":0}},"description":"数据对象"}}},"x-openapi":{"x-setting":{"customCode":200,"language":"zh-CN","enableSwaggerModels":true,"swaggerModelName":"公共响应","enableReloadCacheParameter":false,"enableAfterScript":true,"enableDocumentManage":true,"enableVersion":false,"enableRequestCache":true,"enableFilterMultipartApis":false,"enableFilterMultipartApiMethodType":"POST","enableHost":false,"enableHostText":"","enableDynamicParameter":false,"enableDebug":true,"enableFooter":true,"enableFooterCustom":false,"enableSearch":true,"enableOpenApi":true,"enableHomeCustom":false,"enableGroup":true,"enableResponseCode":true},"x-markdownFiles":[]}}